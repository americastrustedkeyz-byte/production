<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <template
    id="appointment_confirmation_custom_atk_final"
    inherit_id="website_appointment.appointment_info"
    name="ATK Appointment Confirmation Redirect">

    <!-- Inject logic without relying on DOM structure -->
    <xpath expr="." position="inside">

      <t t-call-assets="web.assets_frontend"/>

      <script type="text/javascript">
        (function () {
          // Only run on appointment confirmation pages
          if (window.location.pathname.startsWith("/calendar/view/")) {
            setTimeout(function () {
              window.location.href = "/atk/report/checkout";
            }, 3000);
          }
        })();
      </script>

    </xpath>

  </template>

</odoo>
