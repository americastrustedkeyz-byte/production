<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 1. Define the Page Record (The Entry in the System) -->
    <record id="custom_user_page_record" model="website.page">
        <field name="name">Custom User Visibility</field>
        <field name="url">/custom_user_page</field> <!-- This is your URL -->
        <field name="type">qweb</field>
        <field name="view_id" ref="custom_user_page_template"/>
        <field name="is_published">True</field>
    </record>

    <!-- 2. Define the Template (The Content) -->
    <template id="custom_user_page_template" name="Custom User Template">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">
                
                <!-- HEADER SECTION: Visible to Everyone -->
                <section class="s_title pt32 pb32 bg-200">
                    <div class="container text-center">
                        <h1>Visibility Test Page</h1>
                        <p>2026 Theme Deployment - Odoo.sh</p>
                    </div>
                </section>

                <!-- DIV 1: SHOWS ONLY TO LOGGED-IN USERS / ADMINS -->
                <!-- Logic: "If current user is NOT the public user" -->
                <t t-if="not user_id.id == website.user_id.id">
                    <section class="s_text_block pt64 pb64 bg-success-light" style="background-color: #d4edda;">
                        <div class="container text-center">
                            <i class="fa fa-user-circle fa-4x mb-3 text-success"/>
                            <h2 class="text-success">Welcome Back, <t t-esc="user_id.name"/>!</h2>
                            <p class="lead">You are seeing this because you are <strong>logged in</strong>.</p>
                            <a href="/my/account" class="btn btn-success">View My Profile</a>
                        </div>
                    </section>
                </t>

                <!-- DIV 2: SHOWS ONLY TO LOGGED-OUT / PUBLIC VISITORS -->
                <!-- Logic: "If current user IS the public user" -->
                <t t-if="user_id.id == website.user_id.id">
                    <section class="s_text_block pt64 pb64 bg-warning-light" style="background-color: #fff3cd;">
                        <div class="container text-center">
                            <i class="fa fa-lock fa-4x mb-3 text-warning"/>
                            <h2 class="text-warning">Public Access Only</h2>
                            <p class="lead">You are seeing this because you are <strong>not logged in</strong>.</p>
                            <div class="mt-3">
                                <a href="/web/login" class="btn btn-warning">Sign In</a>
                                <span class="mx-2">or</span>
                                <a href="/web/signup" class="btn btn-outline-dark">Create Account</a>
                            </div>
                        </div>
                    </section>
                </t>

                <!-- BOTTOM SECTION: Editable area for drag-and-drop -->
                <div class="oe_structure"/>
            </div>
        </t>
    </template>
</odoo>
